from django.db import models
from django.contrib.auth import models as auth_models
import datetime

"""attribute in User
username(*), first_name, last_name, email, password, is_staff, is_active,
is_superuser, last_login, date_joined
"""

class Account(models.Model):
    user = models.ForeignKey(auth_models.User, unique=True)
    weiboId = models.IntegerField(default=0)

    def __unicode__(self):
        return self.user.username

    @staticmethod
    def get_account(user):
        return Account.objects.get(user=user)

class Topic(models.Model):

    title = models.CharField(max_length=100, unique=True, db_index=True)
    rss = models.CharField(max_length=400)
    time = models.DateTimeField(default=datetime.datetime.now, db_index=True)
    
    def __unicode__(self):
        return self.title


class News(models.Model):

    title = models.CharField(max_length=100, db_index=True)
    link = models.CharField(max_length=400)
    pubDate = models.DateTimeField(default=datetime.datetime.now, db_index=True)
    summary = models.TextField(blank=True)
    page = models.TextField(blank=True)
    content = models.TextField(blank=True)

    topic = models.ForeignKey(Topic)

    def __unicode__(self):
        return '[Topic,',self.title,']'

class WeiboConfig(models.Model):

    key = models.CharField(max_length=100, unique=True, db_index=True)
    value = models.CharField(max_length=400)

    def __unicode__(self):
       return '[',self.key,',',self.value,']'

class GReaderConfig(models.Model):

    key = models.CharField(max_length=100, unique=True, db_index=True)
    value = models.CharField(max_length=400)

    def __unicode__(self):
       return '[',self.key,',',self.value,']'
   

